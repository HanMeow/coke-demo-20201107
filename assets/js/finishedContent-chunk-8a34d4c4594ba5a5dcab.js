(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"8hFa":function(t,e,a){},JZXj:function(t,e,a){"use strict";a("8hFa")},RbsQ:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return l}));var s=a("8VmE"),i=a.n(s),n=a("lOrp"),o=a("XI5h"),c={name:"Finished",data:function(){return{inputName:"",updating:!1,warn:!1,toastMsg:"",toastShow:!1,toastTimer:null}},computed:i()({},Object(n.c)(["loading"]),Object(n.c)("images",{title:"finished/textTitle",textName:"finished/textName",confirm:"finished/confirm"}),Object(n.c)("game",["selected"])),watch:{inputName:function(t){for(;t.replace(/[\u4E00-\u9FFF]/g,"xx").length>8;){var e=t.split("");e.pop(),t=e.join("")}this.inputName=t},toastMsg:function(t){var e=this;t?(this.toastShow=!0,this.toastTimer&&(clearTimeout(this.toastTimer),this.toastTimer=null),this.toastTimer=setTimeout((function(){e.toastShow=!1,clearTimeout(e.toastTimer)}),2e3)):(this.toastShow=!1,clearTimeout(this.toastTimer))}},created:function(){this.loadStorage()},beforeDestroy:function(){this.toastShow=!1,clearTimeout(this.toastTimer)},mounted:function(){this.loadImamges("finished").then((function(){}))},methods:i()({},Object(n.b)(["setLoading"]),Object(n.b)("images",{loadImamges:"load"}),Object(n.b)("share",["callAPI"]),Object(n.b)("storage",{loadStorage:"loadStorage"}),Object(n.b)("analytics",["callGaButton"]),{onCanTransition:function(t){this.toastShow||(this.toastMsg="")},onClick:function(){var t=this;this.inputName?(this.callGaButton("btn_send"),this.updating=!0,this.setLoading("原廠報告產生中"),Promise.all([this.callAPI({method:"result",data:{ESOURCE1:this.inputName,ESOURCE3:o.c[this.selected]}}),this.callAPI({method:"share",data:{ESOURCE1:this.inputName,ESOURCE3:o.c[this.selected]}})]).then((function(){for(var e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];t.$router.replace({name:"result",params:{location:o.b[t.selected]}})})).catch((function(e){t.toastMsg="產生過程出錯，請稍後再試\n\r"+e}))):this.warn=!0}})},r=(a("JZXj"),a("psIG")),l=Object(r.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w-100 h-100 style-page d-flex flex-column align-items-center"},[a("div",{staticClass:"flex-blocker-5"}),!t.loading||t.updating?[a("img",{staticClass:"mb-2 mt-4 intro-title",attrs:{src:t.title.src}}),a("div",{staticClass:"flex-blocker-2"}),a("div",{staticClass:"input-group mb-2 mt-41 d-flex align-items-center",class:{warn:t.warn},on:{input:function(e){t.warn=!1}}},[a("img",{staticClass:"mx-2 input",attrs:{src:t.textName.src}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputName,expression:"inputName"}],staticClass:"p-2",domProps:{value:t.inputName},on:{input:function(e){e.target.composing||(t.inputName=e.target.value)}}})]),a("div",{staticClass:"flex-blocker-2"}),a("button",{staticClass:"main red btn-circle mt-1 mb-3",on:{click:t.onClick}},[a("img",{attrs:{src:t.confirm.src}})]),a("div",{staticClass:"flex-blocker-2"})]:t._e(),a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.toastShow,expression:"toastShow"}],staticClass:"toastMsg p-2",on:{transitionend:t.onCanTransition}},[a("p",[t._v(t._s(t.toastMsg))])])])],2)}),[],!1,null,null,null).exports}}]);